<!DOCTYPE html>
<html>
<head>
    <title>Blox & Co Dashboard</title>
</head>
<body style="font-family: Arial; padding:20px;">
    <h1>ðŸ“Š Visitor Logs</h1>
    <button onclick="clearLogs()">Clear Logs</button>
    <button onclick="location.href='/logout'">Logout</button>

    <table border="1" cellpadding="6" style="margin-top:20px; width:100%;">
        <thead>
            <tr>
                <th>IP</th>
                <th>Country</th>
                <th>Browser</th>
                <th>OS</th>
                <th>Time</th>
            </tr>
        </thead>
        <tbody id="logTable"></tbody>
    </table>

<script>
    async function loadLogs() {
        const res = await fetch("/api/logs");
        const logs = await res.json();
        const table = document.getElementById("logTable");
        table.innerHTML = "";
        
        logs.forEach(l => {
            table.innerHTML += `
                <tr>
                    <td>${l.ip}</td>
                    <td>${l.country}</td>
                    <td>${l.browser}</td>
                    <td>${l.os}</td>
                    <td>${l.time}</td>
                </tr>
            `;
        });
    }

    async function clearLogs() {
        await fetch("/api/clear");
        loadLogs();
    }

    loadLogs();
    setInterval(loadLogs, 5000);
</script>

</body>
</html>
